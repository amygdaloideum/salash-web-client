{"version":3,"sources":["/index.js","/App.js","/routes.js","/modules/App/App.js","/modules/App/components/Navbar/Navbar.jsx","/modules/App/app-reducer.js","/util/action-creator.js","/modules/App/components/Footer/Footer.js","/modules/App/pages/StartPage/StartPage.jsx","/modules/Recipe/components/RecipeQuickSearch/RecipeQuickSearch.js","/modules/App/components/Menu/Menu.js","/modules/Category/CategoryThunks.js","/util/api.js","/modules/Category/CategoryReducer.js","/modules/Recipe/pages/RecipeSearchPage/RecipeSearchPage.js","/util/queryBuilder.js","/modules/Recipe/components/RecipeSearchForm/RecipeSearchForm.js","/components/form/formInputs.js","/modules/Category/components/CategorySelect.js","/modules/Ingredient/components/IngredientSelect/IngredientSelect.js","/modules/Recipe/pages/RecipeListPage/RecipeListPage.js","/modules/Recipe/components/RecipeList.js","/modules/Recipe/components/RecipeListItem/RecipeListItem.js","/modules/Recipe/RecipeActions.js","/modules/Recipe/RecipeReducer.js","/modules/Recipe/pages/RecipeDetailPage/RecipeDetailPage.js","/components/InteractionButtons/InteractionButtons.js","/modules/Recipe/pages/RecipeCreationPage/RecipeCreationPage.jsx","/modules/Recipe/components/RecipeCreateForm/RecipeCreateForm.js","/modules/Recipe/components/RecipeEditor/RecipeEditor.js","/modules/Ingredient/components/IngredientAndAmountSelect/IngredientAndAmountSelect.js","/modules/Recipe/pages/RecipeCreatedPage/RecipeCreatedPage.js","/modules/Recipe/pages/RecipeDeletedPage/RecipeDeletedPage.js","/modules/Recipe/pages/RecipeEditPage/RecipeEditPage.js","/modules/Auth/pages/LoginPage/LoginPage.js","/modules/Auth/components/loginform/loginform.js","/modules/Auth/components/SocialSignInButtons/SocialSignInButtons.js","/modules/Auth/AuthReducer.js","/env.js","/modules/Auth/pages/LoginLandingPage/LoginLandingPage.jsx","/modules/Auth/AuthThunks.js","/modules/Auth/pages/SignupPage/SignupPage.js","/modules/User/pages/UserPage.js","/modules/User/components/UserRecipes.js","/modules/User/UserActions.js","/modules/User/UserReducer.js","/modules/Auth/pages/NotFoundPage/NotFoundPage.js","/store.js"],"names":["store","document","getElementById","App","props","getState","auth","user","requireAuth","nextState","replace","id","pathname","state","nextPathname","location","router","isActive","children","mapStateToProps","propTypes","isBurgerVisible","app","isBurgerMenuExpanded","dispatchToProps","setBurgerVisibility","create","Navbar","toggleBurgerVisibility","Component","initialState","ActionCreators","AppReducer","action","type","partialState","payload","getBurgerVisibility","ActionCreator","Footer","categories","StartPage","handleQuickSearch","fields","ingredient1","encodeURIComponent","ingredient2","push","category","RecipeQuickSearch","handleSubmit","map","i","_id","name","form","initialValues","Menu","cuid","fetchCategories","get","then","dispatch","categoriesRecieved","res","API_URL","buildHeaders","localStorage","getItem","endpoint","headers","method","response","json","CategoryReducer","getCategories","data","RecipeSearchPage","handleSearch","ingredients","need","build","jsToStringQuery","formatQueryArray","queryToAffirmation","encodeCategory","c","encodeIngredient","baseUrl","title","length","undefined","titleQuery","categoriesQuery","join","ingredientsQuery","params","url","reduce","prev","current","index","split","query","constructor","Array","cat","ing","validate","errors","RecipeSearchForm","invalid","submitting","pristine","renderInput","input","label","icon","meta","touched","error","valid","renderTextarea","placeholder","SubmitButton","text","disabled","SubmitButtonNoValidation","submit","CategorySelect","handleChange","e","option","value","findIndex","v","onChange","concat","target","unselectIngredient","filter","options","ingredientsSelect","addChip","indexOf","setState","chips","removeChip","slice","updateValue","evt","toLowerCase","handleKeyPress","key","chip","RecipeListPage","getAffirmation","recipes","RecipeList","affirmation","recipe","RecipeListItem","loves","low","slug","description","addRecipes","addRecipe","loveRecipe","unloveRecipe","favoriteRecipe","unfavoriteRecipe","deleteRecipe","fetchRecipes","fetchRecipe","searchRecipes","addRecipeRequest","updateRecipeRequest","loveRecipeRequest","unloveRecipeRequest","favoriteRecipeRequest","unfavoriteRecipeRequest","deleteRecipeRequest","ADD_RECIPE","ADD_RECIPES","LOVE_RECIPE","UNLOVE_RECIPE","FAVORITE_RECIPE","UNFAVORITE_RECIPE","DELETE_RECIPE","token","recipeCuid","actionType","cloneObj","JSON","parse","stringify","obj","interactWithRecipe","interaction","clone","find","interactions","r","removeRecipeFromList","RecipeReducer","getRecipes","getRecipe","RecipeDetailsPage","createMarkup","__html","markup","love","unlove","favorite","unfavorite","delete","edit","isAuthor","author","imageUrl","amount","instructions","LoveButton","loveAction","unloveAction","FavButton","favoriteAction","unfavoriteAction","DeleteButton","deleteAction","EditButton","editAction","RecipeCreationPage","handleCreate","values","RecipeCreateForm","editMode","RichTextEditor","RichTextEditorDefault","RecipeEditor","toString","shouldRender","require","default","createValueFromString","createEmptyValue","toolbarConfig","display","INLINE_STYLE_BUTTONS","style","className","BLOCK_TYPE_DROPDOWN","BLOCK_TYPE_BUTTONS","renderField","renderIngredients","field","remove","RecipeCreatedPage","RecipeDeletedPage","RecipeEditPage","LoginPage","handleLogin","email","password","loginUserRequest","handleFacebookLogin","facebookLoginRequest","reload","FACEBOOK_APP_ID","FACEBOOK_REDIRECT_URL","message","formStyle","width","LoginForm","login","FacebookButton","GoogleButton","TwitterButton","tokenRequested","tokenRecieved","authenticated","fetching","AuthReducer","getMessage","requestToken","LoginLandingPage","componentDidMount","code","logOutUser","setItem","cookie","logout","SignupPage","UserPage","goToRecipe","signOut","goToAbout","username","fetchUser","addUser","userRecieved","UserReducer","getUser","NotFoundPage","configureStore","rootReducer","routing","buildInitialState","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","enhancers"],"mappings":"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","file":"","sourcesContent":["import React from 'react';\r\nimport { render } from 'react-dom';\r\nimport App from './App';\r\nimport { configureStore, buildInitialState } from './store';\r\n\r\n// Initialize store\r\nconst store = configureStore(buildInitialState());\r\n\r\nrender(<App store={store} />, document.getElementById('root'));\r\n","/**\r\n * Root Component\r\n */\r\nimport React from 'react';\r\nimport { Provider } from 'react-redux';\r\nimport { Router, browserHistory } from 'react-router';\r\nimport { syncHistoryWithStore } from 'react-router-redux';\r\n\r\n// Import Routes\r\nimport routes from './routes';\r\n\r\n// Base stylesheet\r\nimport './styles/main.sass';\r\n\r\nexport default function App(props) {\r\n  return (\r\n    <Provider store={props.store}>\r\n      <Router history={syncHistoryWithStore(browserHistory, props.store)}>\r\n        {routes(props.store.getState().auth.user)}\r\n      </Router>\r\n    </Provider>\r\n  );\r\n}\r\n","/* eslint-disable global-require */\r\nimport React from 'react';\r\nimport { Route, IndexRoute } from 'react-router';\r\nimport App from './modules/App/App';\r\n\r\n// Pages\r\nimport startPage from './modules/App/pages/StartPage/StartPage';\r\nimport RecipeSearchPage from './modules/Recipe/pages/RecipeSearchPage/RecipeSearchPage';\r\nimport RecipeListPage from './modules/Recipe/pages/RecipeListPage/RecipeListPage';\r\nimport RecipeDetailPage from './modules/Recipe/pages/RecipeDetailPage/RecipeDetailPage';\r\nimport RecipeCreationPage from './modules/Recipe/pages/RecipeCreationPage/RecipeCreationPage';\r\nimport RecipeCreatedPage from './modules/Recipe/pages/RecipeCreatedPage/RecipeCreatedPage';\r\nimport RecipeDeletedPage from './modules/Recipe/pages/RecipeDeletedPage/RecipeDeletedPage';\r\nimport RecipeEditPage from './modules/Recipe/pages/RecipeEditPage/RecipeEditPage';\r\nimport LoginPage from './modules/Auth/pages/LoginPage/LoginPage';\r\nimport LoginLandingPage from './modules/Auth/pages/LoginLandingPage/LoginLandingPage';\r\nimport SignupPage from './modules/Auth/pages/SignupPage/SignupPage';\r\nimport UserPage from './modules/User/pages/UserPage';\r\nimport NotFoundPage from './modules/Auth/pages/NotFoundPage/NotFoundPage';\r\n\r\nconst requireAuth = (nextState, replace, user) => {\r\n  if (!user.id) {\r\n    replace({\r\n      pathname: '/login',\r\n      state: { nextPathname: nextState.location.pathname }\r\n    })\r\n  }\r\n}\r\n\r\nexport default user => (\r\n  <Route path=\"/\" component={App}>\r\n    <IndexRoute component={startPage} />\r\n    <Route path=\"/find\" component={RecipeSearchPage} />\r\n    <Route path=\"/search\" component={RecipeListPage} />\r\n    <Route path=\"/recipes/:slug-:cuid\" component={RecipeDetailPage} />\r\n    <Route path=\"/create\" component={RecipeCreationPage}\r\n      onEnter={(nextState, replace) => requireAuth(nextState, replace, user)}\r\n    />\r\n    <Route path=\"/created\" component={RecipeCreatedPage} />\r\n    <Route path=\"/recipes/deleted\" component={RecipeDeletedPage} />\r\n    <Route\r\n      path=\"/recipes/edit/:cuid\" component={RecipeEditPage}\r\n      onEnter={(nextState, replace) => requireAuth(nextState, replace, user)}\r\n    />\r\n    <Route path=\"/login\" component={LoginPage} />\r\n    <Route path=\"/facebook\" component={LoginLandingPage} />\r\n    <Route path=\"/signup\" component={SignupPage} />\r\n    <Route path=\"/user/:id\" component={UserPage} />\r\n    <Route path=\"*\" component={NotFoundPage} />\r\n  </Route>\r\n);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\n// Import Components\r\nimport Navbar from './components/Navbar/Navbar';\r\nimport Footer from './components/Footer/Footer';\r\n\r\nexport class App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {!this.props.router.isActive('/', true) ? <Navbar user={this.props.user} /> : null}\r\n        <div>\r\n          {this.props.children}\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// Retrieve data from store as props\r\nfunction mapStateToProps(store) {\r\n  return {\r\n    user: store.auth.user\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(App);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router'\r\n\r\nimport { ActionCreators } from '../../app-reducer';\r\n\r\nconst propTypes = {\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  user: state.auth.user,\r\n  isBurgerVisible: state.app.isBurgerMenuExpanded,\r\n});\r\n\r\nconst dispatchToProps = {\r\n  setBurgerVisibility: ActionCreators.setBurgerVisibility.create,\r\n};\r\n\r\n\r\nclass Navbar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  toggleBurgerVisibility = () => {\r\n    this.props.setBurgerVisibility(!this.props.isBurgerVisible);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <nav className=\"navbar is-primary\">\r\n        <div className=\"container\">\r\n          <div className=\"navbar-brand\">\r\n            <a className=\"navbar-item\">\r\n              <h1 className=\"title\">Salash</h1>\r\n            </a>\r\n            <span className={`navbar-burger burger ${this.props.isBurgerVisible ? 'is-active' : ''}`} onClick={this.toggleBurgerVisibility}>\r\n              <span></span>\r\n              <span></span>\r\n              <span></span>\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div id=\"navbarMenuHeroA\" className={`navbar-menu ${this.props.isBurgerVisible ? 'is-active' : ''}`}>\r\n          <div className=\"navbar-end\">\r\n            <a className=\"navbar-item is-active\">Find</a>\r\n            <Link to=\"/create\" className=\"navbar-item\">Contribute</Link>\r\n            <a className=\"navbar-item\">Discover</a>\r\n              <span className=\"navbar-item\">\r\n                <Link to=\"/login\" className=\"button is-primary is-inverted\">\r\n                  <span className=\"icon\">\r\n                    <i className=\"fa fa-github\"></i>\r\n                  </span>\r\n                  <span>Login</span>\r\n                </Link>\r\n              </span>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nNavbar.propTypes = propTypes;\r\n\r\nexport default connect(mapStateToProps, dispatchToProps)(Navbar);","import ActionCreator from '../../util/action-creator';\r\n\r\nconst initialState = {\r\n  isBurgerMenuExpanded: false,\r\n};\r\n\r\nexport const ActionCreators = {\r\n  setBurgerVisibility: new ActionCreator('SET_BURGER_VISIBILITY'),\r\n};\r\n\r\nconst AppReducer = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n    case ActionCreators.setBurgerVisibility.type:\r\n      const partialState = { isBurgerMenuExpanded: action.payload };\r\n      return { ...state, ...partialState };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n/* Selectors */\r\nexport const getBurgerVisibility = state => state.app.isBurgerMenuExpanded;\r\n\r\n// Export Reducer\r\nexport default AppReducer;\r\n","export default class ActionCreator {\r\n  constructor(type) {\r\n    this. type = type;\r\n  }\r\n\r\n  create = (payload) => {\r\n    return { type: this.type, payload };\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport function Footer() {\r\n  return (\r\n    <div>\r\n      <p>Made by Daniel Bornstrand</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { browserHistory } from 'react-router';\r\nimport slug from 'limax';\r\nimport { Link } from 'react-router';\r\n\r\n// Import Components\r\nimport RecipeQuickSearch from '../../../Recipe/components/RecipeQuickSearch/RecipeQuickSearch';\r\nimport Menu from '../../components/Menu/Menu';\r\n\r\n// Import Actions\r\nimport { fetchCategories } from '../../../Category/CategoryThunks';\r\n\r\n// Import Selectors\r\nimport { getCategories } from '../../../Category/CategoryReducer';\r\n\r\nimport Navbar from '../../components/Navbar/Navbar';\r\n\r\nconst mapStateToProps = state => ({\r\n  categories: state.categories,\r\n});\r\n\r\nconst dispatchToProps = {};\r\n\r\nclass StartPage extends React.Component {\r\n  componentDidMount() {\r\n    //this.props.dispatch(fetchCategories());\r\n  }\r\n\r\n  handleQuickSearch = (fields) => {\r\n    const ingredient1 = slug(encodeURIComponent(fields.ingredient1.replace(/\\s/g, \"-\")));\r\n    const ingredient2 = slug(encodeURIComponent(fields.ingredient2.replace(/\\s/g, \"-\")));\r\n    browserHistory.push(`/search?categories=${fields.category}&ingredients=${ingredient1},${ingredient2}`);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"\">\r\n        {/*<div className={styles.menu}>\r\n          <Menu user={this.props.user} />\r\n        </div>'*/}\r\n        <section className=\"hero is-fullheight is-primary is-bold\">\r\n          <div className=\"hero-head\">\r\n            <Navbar />\r\n          </div>\r\n          <div className=\"hero-body\">\r\n            <div className=\"container tc\">\r\n              <h1 className=\"title is-1\">Salash</h1>\r\n              <h2 className=\"subtitle is-4\">vegan recipe hub</h2>\r\n              <h3>save, share and discover new food</h3>\r\n            </div>\r\n          </div>\r\n          <div className=\"hero-foot\">\r\n            <div className=\"container flex flex-column items-center\">\r\n              <span>lets go</span>\r\n              <span className=\"icon is-large\">\r\n                <i className=\"fa fa-3x fa-chevron-down\"></i>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </section>\r\n        <div>\r\n          <RecipeQuickSearch handleQuickSearch={this.handleQuickSearch} categories={this.props.categories} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, dispatchToProps)(StartPage);\r\n","import React from 'react';\r\nimport { Field, reduxForm } from 'redux-form';\r\n\r\n// Import Style\r\n\r\nlet RecipeQuickSearch = props => (\r\n  <form onSubmit={props.handleSubmit(props.handleQuickSearch)}>\r\n    <div>\r\n      show me\r\n        <Field name=\"category\" component=\"select\">\r\n        {props.categories.map((category, i) => {\r\n          return <option key={i} value={category._id}>{`${category.name}s`}</option>;\r\n        })}\r\n      </Field>\r\n    </div>\r\n    <div>\r\n      with\r\n        <Field name=\"ingredient1\" component=\"input\" type=\"text\" />\r\n    </div>\r\n    <div>\r\n      and\r\n        <Field name=\"ingredient2\" component=\"input\" type=\"text\" />\r\n    </div>\r\n    <div>\r\n      <div onClick={props.handleSubmit(props.handleQuickSearch)}>\r\n        go\r\n      </div>\r\n    </div>\r\n  </form>\r\n);\r\n\r\nRecipeQuickSearch = reduxForm({\r\n  form: 'quickSearchForm',\r\n  initialValues: {\r\n    category: 'smoothie',\r\n    ingredient1: 'tomato',\r\n    ingredient2: 'banana'\r\n  }\r\n})(RecipeQuickSearch);\r\n\r\nexport default RecipeQuickSearch;\r\n","import React from 'react';\r\nimport { Link } from 'react-router';\r\n\r\nconst Menu = ({ user }) => (\r\n  <div>\r\n    <Link to=\"/find\">\r\n      <i className=\"material-icons\">search</i>\r\n      <div>find</div>\r\n    </Link>\r\n    <Link to=\"/create\">\r\n      <i className=\"material-icons\">add</i>\r\n      <div>add</div>\r\n    </Link>\r\n    { !user || !user.cuid ? <Link to=\"/about\"><i className=\"material-icons\">info_outline</i><div>about</div></Link> : null }\r\n    { user && user.cuid ? <Link to={`/user/${user.cuid}`}> <i className=\"material-icons\">face</i> <div>you</div> </Link> : null }\r\n  </div>\r\n);\r\n\r\nexport default Menu;","import api from '../../util/api';\r\nimport { ActionCreators } from './CategoryReducer';\r\n\r\nexport function fetchCategories() {\r\n  return dispatch => {\r\n    return api.get('categories').then(res => {\r\n      dispatch(ActionCreators.categoriesRecieved.create(res.categories));\r\n    });\r\n  };\r\n}","import fetch from 'isomorphic-fetch';\r\n\r\nexport const API_URL = `/api`;\r\n\r\nconst buildHeaders = () => ({\r\n  'content-type': 'application/json',\r\n  'authorization': localStorage.getItem(\"token\"),\r\n});\r\n\r\nexport function get(endpoint) {\r\n  return fetch(`${API_URL}/${endpoint}`, {\r\n    headers: buildHeaders(),\r\n    method: 'GET',\r\n  }).then(response => response.json());\r\n}\r\n\r\nexport default {\r\n  get,\r\n};\r\n","import ActionCreator from '../../util/action-creator';\r\n\r\nexport const ActionCreators = {\r\n  categoriesRecieved: new ActionCreator('CATEGORIES_RECIEVED'),\r\n};\r\n\r\n// Initial State\r\nconst initialState = [];\r\n\r\nconst CategoryReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ActionCreators.categoriesRecieved.type:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default CategoryReducer;\r\n\r\n\r\nexport const getCategories = state => state.categories.data;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { browserHistory } from 'react-router';\r\nimport slug from 'limax';\r\nimport { Link } from 'react-router';\r\nimport { build } from '../../../../util/queryBuilder';\r\n\r\n// Import Components\r\nimport RecipeSearchForm from '../../components/RecipeSearchForm/RecipeSearchForm';\r\n\r\n// Import Actions\r\nimport { fetchCategories } from '../../../Category/CategoryThunks';\r\n\r\n// Import Selectors\r\nimport { getCategories } from '../../../Category/CategoryReducer';\r\n\r\nclass RecipeSearchPage extends React.Component {\r\n  componentDidMount() {\r\n    this.props.dispatch(fetchCategories());\r\n  }\r\n\r\n  handleSearch = (fields) => {\r\n    browserHistory.push(build('search', fields));\r\n  };\r\n\r\n  handleQuickSearch = (fields) => {\r\n    const ingredient1 = slug(encodeURIComponent(fields.ingredient1.replace(/\\s/g, \"-\")));\r\n    const ingredient2 = slug(encodeURIComponent(fields.ingredient2.replace(/\\s/g, \"-\")));\r\n    browserHistory.push(`/search?category=${fields.category}&ingredient=${ingredient1}&ingredient=${ingredient2}`);\r\n  };\r\n\r\n  initialValues = {\r\n    categories: [],\r\n    ingredients: []\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>find recipes</h1>\r\n        <RecipeSearchForm initialValues={this.initialValues} categories={this.props.categories} handleSearch={this.handleSearch}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// Actions required to provide data for this component to render in sever side.\r\nRecipeSearchPage.need = [() => { return fetchCategories(); }];\r\n\r\n//Retrieve data from store as props\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    categories: getCategories(state),\r\n  };\r\n}\r\nexport default connect(mapStateToProps)(RecipeSearchPage);\r\n","export const encodeCategory = c => encodeURIComponent(c.replace(/\\s/g, \"-\"));\r\nexport const encodeIngredient = c => encodeURIComponent(c.replace(/\\s/g, \"-\"));\r\n\r\nexport function build(baseUrl, fields) {\r\n\r\n  let { title, ingredients, categories } = fields;\r\n  categories = categories && categories.length ? categories.map(encodeCategory) : undefined;\r\n  ingredients = ingredients && ingredients.length ? ingredients.map(encodeIngredient) : undefined;\r\n\r\n  const titleQuery = title ? `title=${title}` : undefined;\r\n  const categoriesQuery = categories && categories.length ? `categories=${categories.join(',')}` : undefined;\r\n  const ingredientsQuery = ingredients && ingredients.length ? `ingredients=${ingredients.join(',')}`: undefined;\r\n  //const categories = category.map( val => `category=${val}`);\r\n  //const ingredients = ingredient.map( val => `ingredient=${val}`);\r\n\r\n\r\n\r\n  const params = [ titleQuery, categoriesQuery, ingredientsQuery ];\r\n\r\n  let url = params.reduce(( prev, current, index ) => {\r\n    if(!current) {\r\n      return prev;\r\n    }\r\n    return prev === baseUrl ? `${prev}?${current}` : `${prev}&${current}`;\r\n  },  baseUrl);\r\n\r\n  return url;\r\n}\r\n\r\nexport function jsToStringQuery(baseUrl, fields) {\r\n\r\n  fields.ingredients = fields.ingredients ? fields.ingredients.split(',') : undefined;\r\n  fields.categories = fields.categories ? fields.categories.split(',') : undefined;\r\n\r\n  return build(baseUrl, fields)\r\n}\r\n\r\nexport function formatQueryArray(fields) {\r\n\r\n  fields.ingredients = fields.ingredients ? fields.ingredients.split(',') : [];\r\n  fields.categories = fields.categories ? fields.categories.split(',') : [];\r\n\r\n  return fields;\r\n}\r\n\r\n\r\nexport function queryToAffirmation(query) {\r\n  if(!query.title && !query.ingredients && !query.categories) {\r\n    return 'showing all recipes'\r\n  }\r\n  query.ingredients = query.ingredients.constructor === Array ? query.ingredients.join(',') : query.ingredients;\r\n  query.categories = query.categories.constructor === Array ? query.categories.join(',') : query.categories;\r\n\r\n  const cat = query.categories ? query.categories.split(',').map(c => ` ${c}s`).join(',') : 'recipes';\r\n  const ing = query.ingredients ? `containing ${query.ingredients}` : '';\r\n  const title = query.title ? `with title \\'${query.title}\\'` : '';\r\n  return `showing ${cat} ${ing} ${title}`;\r\n}\r\n\r\n","import React from 'react';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { renderTextarea, renderInput, SubmitButtonNoValidation } from '../../../../components/form/formInputs';\r\nimport CategorySelect from '../../../Category/components/CategorySelect';\r\nimport IngredientSelect from '../../../Ingredient/components/IngredientSelect/IngredientSelect';\r\n\r\n\r\nconst validate = values => {\r\n  const errors = {};\r\n}\r\n\r\nlet RecipeSearchForm = ({ handleSubmit, handleSearch, categories, invalid, submitting, pristine }) => (\r\n  <form>\r\n    <div>\r\n      <Field name=\"title\" icon=\"fa-pencil-square-o\" component={renderInput} type=\"text\" label=\"Title\" />\r\n    </div>\r\n\r\n    <div>\r\n      <h2>categories</h2>\r\n      <Field name='categories' options={categories.map(c => c.name)} component={CategorySelect} />\r\n    </div>\r\n\r\n    <div>\r\n      <h2>ingredients</h2>\r\n      <Field name=\"ingredients\" component={IngredientSelect} />\r\n    </div>\r\n\r\n    <div>\r\n      <SubmitButtonNoValidation submit={handleSubmit(handleSearch)} text='find recipes' />\r\n    </div>\r\n\r\n  </form>\r\n);\r\n\r\nRecipeSearchForm = reduxForm({\r\n  form: 'RecipeSearchForm'\r\n})(RecipeSearchForm);\r\n\r\n\r\n\r\nexport default RecipeSearchForm;","import React, { Component } from 'react';\r\n\r\nexport const renderInput = ({ input, label, icon, type, meta: { touched, error, valid } }) => (\r\n  <div className=\"field\">\r\n    <label className=\"label\">{label}</label>\r\n    <div className=\"control\">\r\n      <input className={`input ${touched && error && 'is-danger'} ${touched && valid && 'is-success'}`} {...input} type={type} />\r\n    </div>\r\n    {touched && error && <p className=\"help is-danger\">{error}</p>}\r\n  </div>\r\n);\r\n\r\nexport const renderTextarea = ({ input, label, placeholder, type, meta: { touched, error, valid } }) => (\r\n  <div className=\"field\">\r\n    <label className=\"label\">{label}</label>\r\n    <div className=\"control\">\r\n      <textarea\r\n        className={`textarea ${touched && error && 'is-danger'} ${touched && valid && 'is-success'}`} {...input}\r\n        type={type}\r\n        placeholder={placeholder} />\r\n    </div>\r\n    {touched && error && <p className=\"help is-danger\">{error}</p>}\r\n  </div>\r\n);\r\n\r\nexport const SubmitButton = ({ text, disabled: { invalid, submitting, pristine } }) => (\r\n  <button disabled={invalid || submitting || pristine} type=\"submit\">{text}</button>\r\n);\r\n\r\nexport const SubmitButtonNoValidation = ({ text, submit }) => (\r\n  <button onClick={submit} type=\"button\">{text}</button>\r\n);","import React from 'react';\r\n\r\nclass CategorySelect extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  handleChange = (e, option) => {\r\n    const input = this.props.input;\r\n    const index = input.value.findIndex(v => v === option);\r\n\r\n    input.onChange(input.value.concat([e.target.value]));\r\n  }\r\n\r\n  unselectIngredient = (category, input) => {\r\n    input.onChange(input.value.filter(v => v !== category));\r\n  }\r\n\r\n  isChecked(option) {\r\n    return ~this.props.input.value.findIndex(v => v === option);\r\n  }\r\n\r\n  render() {\r\n    const { fields, options, label, input } = this.props;\r\n    return (\r\n      <div className=\"field\">\r\n        <label className=\"label\">{label}</label>\r\n        <div className=\"tags\">\r\n          {input.value.map((category, index) => (\r\n          <span key={index} className=\"tag is-info is-medium\">\r\n            {category}\r\n            <button onClick={ e => this.unselectIngredient(category, input)} className=\"delete is-small\"></button>\r\n          </span>))\r\n          }\r\n        </div>\r\n        <div className=\"control\">\r\n          <div className=\"select\">\r\n            <select placeholder=\"select\" value={''} onChange={this.handleChange}>\r\n              <option></option>\r\n              {\r\n                options.map((option, index) => <option key={index}>{option}</option>)\r\n              }\r\n            </select>\r\n          </div>\r\n          <button onClick={this.handleChange} className=\"button is-primary\">add</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default CategorySelect;","import React from 'react';\r\nimport { Field } from 'redux-form';\r\n\r\nclass ingredientsSelect extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      //chips: [],      \r\n      value: ''\r\n    }\r\n  }\r\n\r\n  addChip = () => {\r\n    if (!this.state.value || ~this.props.input.value.indexOf(this.state.value)) {\r\n      this.setState({ value: '' });\r\n      return;\r\n    }\r\n    const chips = [...this.props.input.value, this.state.value];\r\n    this.props.input.onChange(chips);\r\n    this.setState({ value: '' });\r\n  }\r\n\r\n  removeChip = (i) => {\r\n    const chips = [\r\n      ...this.props.input.value.slice(0, i),\r\n      ...this.props.input.value.slice(i + 1)\r\n    ];\r\n    this.props.input.onChange(chips);\r\n  }\r\n\r\n  updateValue = evt => {\r\n    this.setState({\r\n      value: evt.target.value.toLowerCase().replace(/[^a-z\\s]/g,'')\r\n    });\r\n  }\r\n\r\n  handleKeyPress = evt => {\r\n    if(evt.key === 'Enter') {\r\n      this.addChip();\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div>\r\n          {\r\n            this.props.input.value.map((chip, i) => (\r\n              <div key={i}>\r\n                <span>{chip}</span>\r\n                <i onClick={() => this.removeChip(i)} className=\"material-icons\">clear</i>\r\n              </div>\r\n            ))\r\n          }\r\n        </div>\r\n        <div>\r\n          <input value={this.state.value} onKeyPress={this.handleKeyPress} onChange={this.updateValue} type=\"text\" />\r\n          <button type=\"button\" onClick={this.addChip}><i className=\"material-icons\">add</i></button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default ingredientsSelect;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\n// Import Components\r\nimport RecipeList from '../../components/RecipeList';\r\n\r\n// Import Actions\r\nimport { searchRecipes } from '../../RecipeActions';\r\n\r\n// Import Selectors\r\nimport { getRecipes } from '../../RecipeReducer';\r\n\r\nimport { jsToStringQuery, queryToAffirmation } from '../../../../util/queryBuilder';\r\n\r\nclass RecipeListPage extends React.Component {\r\n  componentDidMount() {\r\n    const url = jsToStringQuery('recipes/search', this.props.location.query);\r\n    this.props.dispatch(searchRecipes(url));\r\n  }\r\n\r\n  getAffirmation = () => {\r\n    return queryToAffirmation(this.props.location.query);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n      {\r\n        this.props.recipes ? (<RecipeList affirmation={this.getAffirmation()} recipes={this.props.recipes} />) : null\r\n      }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// Actions required to provide data for this component to render in sever side.\r\nRecipeListPage.need = [({ query }) => {\r\n  return searchRecipes(query);\r\n}];\r\n\r\n// Retrieve data from store as props\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    recipes: getRecipes(state),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(RecipeListPage);\r\n","import React from 'react';\r\n\r\n// Import Components\r\nimport RecipeListItem from './RecipeListItem/RecipeListItem';\r\n\r\nfunction RecipeList(props) {\r\n  return (\r\n    <div>\r\n      <div>\r\n        <div>\r\n          {props.affirmation}\r\n        </div>\r\n        {/*<div>\r\n          <span>most loved</span>\r\n          <a>all time</a>\r\n          <a>this month</a>\r\n          <a>this week</a>\r\n        </div>*/}\r\n      </div>\r\n      {props.recipes.map((recipe, index) => (<RecipeListItem recipe={recipe} key={index} />))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RecipeList;\r\n","import React from 'react';\r\nimport { Link } from 'react-router';\r\n\r\nfunction RecipeListItem({ recipe  }) {\r\n  return (\r\n    <div>\r\n      {/*<div>\r\n        <img src={recipe.imageUrl ? recipe.imageUrl : ''} />\r\n      </div>*/}\r\n      <div>\r\n        <i className=\"material-icons\">favorite</i>\r\n        <span>{recipe.loves.low}</span>\r\n      </div>\r\n      <div>\r\n        <h3>\r\n          <Link to={`/recipes/${recipe.slug}-${recipe.cuid}`} >\r\n            {recipe.title}\r\n          </Link>\r\n        </h3>\r\n        <div>\r\n          <span>Categories:</span>\r\n          {recipe.categories.map((cat, i) => (\r\n            <span key={i}>{cat.name}</span>\r\n          ))}\r\n        </div>\r\n        <div>\r\n          <span>Ingredients:</span>\r\n          {recipe.ingredients.map((ing, i) => (\r\n            <span key={i}>{ing.name}</span>\r\n          ))}\r\n        </div>\r\n        <p>{recipe.description}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RecipeListItem;\r\n","import callApi from '../../util/api';\r\nimport { browserHistory } from 'react-router';\r\n\r\n// Export Constants\r\nexport const ADD_RECIPE = 'ADD_RECIPE';\r\nexport const ADD_RECIPES = 'ADD_RECIPES';\r\nexport const LOVE_RECIPE = 'LOVE_RECIPE';\r\nexport const UNLOVE_RECIPE = 'UNLOVE_RECIPE';\r\nexport const FAVORITE_RECIPE = 'FAVORITE_RECIPE';\r\nexport const UNFAVORITE_RECIPE = 'UNFAVORITE_RECIPE';\r\nexport const DELETE_RECIPE = 'DELETE_RECIPE';\r\n\r\n\r\n// Export Actions\r\nexport function addRecipes(recipes) {\r\n  return {\r\n    type: ADD_RECIPES,\r\n    recipes,\r\n  };\r\n}\r\n\r\nexport function addRecipe(recipe) {\r\n  return {\r\n    type: ADD_RECIPE,\r\n    recipe,\r\n  };\r\n}\r\n\r\nexport function loveRecipe(recipe) {\r\n  return {\r\n    type: LOVE_RECIPE,\r\n    recipe\r\n  };\r\n}\r\n\r\nexport function unloveRecipe(recipe) {\r\n  return {\r\n    type: UNLOVE_RECIPE,\r\n    recipe\r\n  };\r\n}\r\n\r\nexport function favoriteRecipe(recipe) {\r\n  return {\r\n    type: FAVORITE_RECIPE,\r\n    recipe\r\n  };\r\n}\r\n\r\nexport function unfavoriteRecipe(recipe) {\r\n  return {\r\n    type: UNFAVORITE_RECIPE,\r\n    recipe\r\n  };\r\n}\r\n\r\nexport function deleteRecipe(cuid) {\r\n  return {\r\n    type: DELETE_RECIPE,\r\n    cuid\r\n  };\r\n}\r\n\r\n\r\n\r\n\r\nexport function fetchRecipes() {\r\n  return (dispatch) => {\r\n    return callApi('recipes').then(res => {\r\n      dispatch(addRecipes(res.recipes));\r\n    });\r\n  };\r\n}\r\n\r\nexport function fetchRecipe(cuid, token) {\r\n  return (dispatch) => {\r\n    return callApi(`recipes/${cuid}`, 'get', undefined, token).then(res => dispatch(addRecipe(res.recipe)));\r\n  };\r\n}\r\n\r\nexport function searchRecipes(url) {\r\n  return (dispatch) => {\r\n    return callApi(url).then(res => {\r\n      dispatch(addRecipes(res.recipes));\r\n    });\r\n  };\r\n}\r\n\r\nexport function addRecipeRequest(recipe) {\r\n  return (dispatch) => {\r\n    return callApi('recipes', 'post', { recipe }).then(res => {\r\n      browserHistory.push('/created');\r\n    });\r\n  };\r\n}\r\n\r\nexport function updateRecipeRequest(cuid, recipe) {\r\n  return (dispatch) => {\r\n    return callApi('recipes', 'put', { cuid, recipe }).then(res => {\r\n      browserHistory.push('/created');\r\n    });\r\n  };\r\n}\r\n\r\nexport function loveRecipeRequest(recipe) {\r\n  return dispatch => {\r\n    return callApi('interactions', 'post', { recipeCuid: recipe.cuid, actionType: 'love' }).then(res => {\r\n      dispatch(loveRecipe(recipe));\r\n    });\r\n  };\r\n}\r\n\r\nexport function unloveRecipeRequest(recipe) {\r\n  return dispatch => {\r\n    return callApi('interactions', 'delete', { recipeCuid: recipe.cuid, actionType: 'love' }).then(res => {\r\n      dispatch(unloveRecipe(recipe));\r\n    });\r\n  };\r\n}\r\n\r\nexport function favoriteRecipeRequest(recipe) {\r\n  return dispatch => {\r\n    return callApi('interactions', 'post', { recipeCuid: recipe.cuid, actionType: 'favorite' }).then(res => {\r\n      dispatch(favoriteRecipe(recipe));\r\n    });\r\n  };\r\n}\r\n\r\nexport function unfavoriteRecipeRequest(recipe) {\r\n  return dispatch => {\r\n    return callApi('interactions', 'delete', { recipeCuid: recipe.cuid, actionType: 'favorite' }).then(res => {\r\n      dispatch(unfavoriteRecipe(recipe));\r\n    });\r\n  };\r\n}\r\n\r\nexport function deleteRecipeRequest(recipe) {\r\n  return dispatch => {\r\n    return callApi('recipes', 'delete', { cuid: recipe.cuid }).then(res => {\r\n      dispatch(deleteRecipe(recipe.cuid));\r\n    });\r\n  };\r\n}\r\n\r\n\r\n","// Import Actions\r\nimport {\r\n  ADD_RECIPES,\r\n  ADD_RECIPE,\r\n  LOVE_RECIPE,\r\n  UNLOVE_RECIPE,\r\n  FAVORITE_RECIPE,\r\n  UNFAVORITE_RECIPE,\r\n  DELETE_RECIPE\r\n} from './RecipeActions';\r\n\r\n// Initial State\r\nconst initialState = { data: [] };\r\n\r\nconst cloneObj = obj => JSON.parse(JSON.stringify(obj));\r\n\r\nconst interactWithRecipe = (recipes, recipe, interaction, value) => {\r\n  const clone = cloneObj(recipes.find(e => e.cuid == recipe.cuid));\r\n  clone.interactions[interaction] = value;\r\n  return [...recipes].map(r => r.cuid == recipe.cuid ? clone : r);\r\n};\r\n\r\nconst removeRecipeFromList = (recipes, cuid) => {\r\n  const index = recipes.findIndex(r => r.cuid === cuid);\r\n  return [\r\n    ...recipes.slice(0, index),\r\n    ...recipes.slice(index + 1)\r\n  ];\r\n}\r\n\r\nconst RecipeReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n\r\n    case ADD_RECIPE:\r\n      return {\r\n        data: [action.recipe, ...state.data]\r\n      };\r\n\r\n    case ADD_RECIPES:\r\n      return {\r\n        data: action.recipes\r\n      };\r\n\r\n    case LOVE_RECIPE:\r\n      return {\r\n        data: interactWithRecipe(state.data, action.recipe, 'love', true)\r\n      };\r\n\r\n    case UNLOVE_RECIPE:\r\n      return {\r\n        data: interactWithRecipe(state.data, action.recipe, 'love', null)\r\n      };\r\n\r\n    case FAVORITE_RECIPE:\r\n      return {\r\n        data: interactWithRecipe(state.data, action.recipe, 'favorite', true)\r\n      };\r\n\r\n    case UNFAVORITE_RECIPE:\r\n      return {\r\n        data: interactWithRecipe(state.data, action.recipe, 'favorite', null)\r\n      };\r\n\r\n    case DELETE_RECIPE:\r\n      return {\r\n        data: removeRecipeFromList(state.data, action.cuid)\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const getRecipes = state => state.recipes.data;\r\n\r\nexport const getRecipe = (state, cuid) => {\r\n  return state.recipes.data.filter(recipe => recipe ? recipe.cuid === cuid : false)[0]\r\n};\r\n\r\nexport default RecipeReducer;\r\n","import React  from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { browserHistory } from 'react-router';\r\n\r\n// Import Components\r\nimport { LoveButton, FavButton, DeleteButton, EditButton } from '../../../../components/InteractionButtons/InteractionButtons'\r\n\r\n// Import Actions\r\nimport {\r\n  fetchRecipe,\r\n  loveRecipeRequest,\r\n  unloveRecipeRequest,\r\n  favoriteRecipeRequest,\r\n  unfavoriteRecipeRequest,\r\n  deleteRecipeRequest\r\n} from '../../RecipeActions';\r\n\r\n// Import Selectors\r\nimport { getRecipe } from '../../RecipeReducer';\r\n\r\nclass RecipeDetailsPage extends React.Component {\r\n\r\n  createMarkup = markup => ({ __html: markup });\r\n\r\n  love = () => {\r\n    this.props.dispatch(loveRecipeRequest(this.props.recipe));\r\n  }\r\n\r\n  unlove = () => {\r\n    this.props.dispatch(unloveRecipeRequest(this.props.recipe));\r\n  }\r\n\r\n  favorite = () => {\r\n    this.props.dispatch(favoriteRecipeRequest(this.props.recipe));\r\n  }\r\n\r\n  unfavorite = () => {\r\n    this.props.dispatch(unfavoriteRecipeRequest(this.props.recipe));\r\n  }\r\n\r\n  delete = () => {\r\n    browserHistory.push('/recipes/deleted');\r\n    this.props.dispatch(deleteRecipeRequest(this.props.recipe));\r\n  }\r\n\r\n  edit = () => {\r\n    browserHistory.push(`/recipes/edit/${this.props.recipe.cuid}`);\r\n  }\r\n\r\n  render() {\r\n    const isAuthor = (this.props.recipe) ? this.props.recipe.author.cuid === this.props.user.cuid : undefined;\r\n    return (\r\n      <div>\r\n        {\r\n          !this.props.recipe ? <div>\r\n            <h1> Recipe not found</h1>\r\n          </div> : null\r\n        }\r\n        {\r\n        this.props.recipe ?\r\n        <div>\r\n          {\r\n            this.props.recipe.imageUrl ? <div><img src={this.props.recipe.imageUrl} /></div> : null\r\n          }\r\n          <h1>{this.props.recipe.title}</h1>\r\n          <div>\r\n            {this.props.recipe.categories.map((cat, i) => (\r\n              <span key={i}>{cat.name}</span>\r\n            ))}\r\n          </div>\r\n\r\n          <p>{this.props.recipe.description}</p>\r\n\r\n          <div>\r\n            <h3>Ingredients</h3>\r\n            <table>\r\n              <tbody>\r\n                {this.props.recipe.ingredients.map((ing, i) => (\r\n                  <tr key={i}>\r\n                    <td>{ing.name}</td>\r\n                    <td>{ing.amount}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <h3>Instructions</h3>\r\n          <div dangerouslySetInnerHTML={this.createMarkup(this.props.recipe.instructions)} />\r\n          <div>\r\n            <LoveButton loveAction={this.love} unloveAction={this.unlove} interactions={this.props.recipe.interactions} />\r\n            <FavButton favoriteAction={this.favorite} unfavoriteAction={this.unfavorite} interactions={this.props.recipe.interactions} />\r\n          </div>\r\n          {isAuthor ? (\r\n            <div>\r\n              <DeleteButton deleteAction={this.delete} />\r\n              <EditButton editAction={this.edit} />\r\n            </div>\r\n          ) : null\r\n          }\r\n        </div> : null\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// Actions required to provide data for this component to render in sever side.\r\nRecipeDetailsPage.need = [({ params, state }) => {\r\n  return fetchRecipe(params.cuid, state.auth.token);\r\n}];\r\n\r\n// Retrieve data from store as props\r\nfunction mapStateToProps(state, props) {\r\n  return {\r\n    recipe: getRecipe(state, props.params.cuid),\r\n    user: state.auth.user\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(RecipeDetailsPage);\r\n","import React, { Component } from 'react';\r\n\r\nexport const LoveButton = ({ loveAction, unloveAction, interactions }) => (\r\n  <div\r\n    onClick={() => { interactions.love ? unloveAction() : loveAction() }}>\r\n    {interactions.love}\r\n    <i className=\"material-icons\">{interactions.love ? 'favorite' : 'favorite_outline'}</i>\r\n    <span>love</span>\r\n  </div>\r\n);\r\n\r\nexport const FavButton = ({ favoriteAction, unfavoriteAction, interactions }) => (\r\n  <div\r\n    onClick={() => { interactions.favorite ? unfavoriteAction() : favoriteAction() }}>\r\n    <i className=\"material-icons\">{interactions.favorite ? 'star' : 'star_outline'}</i>\r\n    <span>favorite</span>\r\n  </div>\r\n);\r\n\r\nexport const DeleteButton = ({ deleteAction }) => (\r\n  <div\r\n    onClick={() => deleteAction()}\r\n  >\r\n    <i className=\"material-icons\">delete_forever</i>\r\n    <span>delete</span>\r\n  </div>\r\n);\r\n\r\nexport const EditButton = ({ editAction }) => (\r\n  <div\r\n    onClick={() => editAction()}\r\n  >\r\n    <i className=\"material-icons\">edit</i>\r\n    <span>edit</span>\r\n  </div>\r\n);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { addRecipeRequest } from '../../RecipeActions';\r\nimport callApi from '../../../../util/api';\r\n\r\nimport RecipeCreateForm from '../../components/RecipeCreateForm/RecipeCreateForm';\r\n\r\n// Import Actions\r\nimport { fetchCategories } from '../../../Category/CategoryThunks';\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n  categories: state.categories,\r\n});\r\n\r\nconst dispatchToProps = {\r\n  fetchCategories,\r\n};\r\n\r\n\r\nexport class RecipeCreationPage extends React.Component {\r\n  componentDidMount() {\r\n    this.props.fetchCategories();\r\n  }\r\n\r\n  handleCreate = (fields) => {\r\n    this.props.dispatch(addRecipeRequest(fields));\r\n  };\r\n\r\n  initialValues = {\r\n    categories: [],\r\n    ingredients: [\r\n      { amount: '', name: '' }\r\n    ]\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"section\">\r\n        <div className=\"container\">\r\n          <h1 className=\"title\">add recipe</h1>\r\n          <RecipeCreateForm initialValues={this.initialValues} handleCreate={this.handleCreate} categories={this.props.categories} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, dispatchToProps)(RecipeCreationPage);\r\n","import React from 'react';\r\nimport { Field, Fields, FieldArray, reduxForm } from 'redux-form';\r\nimport RecipeEditor from '../RecipeEditor/RecipeEditor';\r\nimport CategorySelect from '../../../Category/components/CategorySelect';\r\nimport { renderTextarea, renderInput, SubmitButton } from '../../../../components/form/formInputs';\r\nimport IngredientAndAmountSelect from '../../../Ingredient/components/IngredientAndAmountSelect/IngredientAndAmountSelect';\r\n\r\nconst validate = values => {\r\n  const errors = {};\r\n  if (!values.title) {\r\n    errors.title = 'required';\r\n  }\r\n  if (!values.categories.length) {\r\n    errors.categories = 'at least one category required';\r\n  }\r\n  if (!values.ingredients.length) {\r\n    errors.categories = 'at least one ingredient required';\r\n  }\r\n  return errors;\r\n}\r\n\r\nlet RecipeCreateForm = ({ editMode,handleSubmit, handleCreate, categories, invalid, submitting, pristine }) => (\r\n  <form onSubmit={handleSubmit(handleCreate)}>\r\n\r\n    <Field name=\"title\" icon=\"fa-pencil-square-o\" component={renderInput} type=\"text\" label=\"Title\" />\r\n\r\n    <Field name=\"description\" component={renderTextarea} placeholder=\"write a short description of the recipe\" label=\"Description\" />\r\n    \r\n    <div>\r\n      <Field name='categories' label=\"Categories\" options={categories.map(c => c.name)} component={CategorySelect} />\r\n    </div>\r\n\r\n    <FieldArray name=\"ingredients\" component={IngredientAndAmountSelect} />\r\n\r\n    <div>\r\n      <label>Instructions</label>\r\n      <Field name=\"instructions\" type=\"text\" component={RecipeEditor} />\r\n    </div>\r\n\r\n    <SubmitButton text={editMode ? 'save changes' : 'add recipe'} disabled={{ invalid, submitting, pristine }} />\r\n  </form>\r\n);\r\n\r\nRecipeCreateForm = reduxForm({\r\n  form: 'RecipeCreateForm',\r\n  validate\r\n})(RecipeCreateForm);\r\n\r\n\r\n\r\nexport default RecipeCreateForm;","import React from 'react';\r\nlet RichTextEditor, RichTextEditorDefault;\r\n\r\nexport default class RecipeEditor extends React.Component {\r\n\r\n  constructor () {\r\n    super()\r\n    this.state = {\r\n      shouldRender: false,\r\n      value: {}\r\n    }\r\n  }\r\n\r\n  /*state = {\r\n    value: RichTextEditor.createEmptyValue(),\r\n    shouldRender: false\r\n  }*/\r\n\r\n  componentDidMount () {\r\n    RichTextEditor = require('react-rte');\r\n    RichTextEditorDefault = RichTextEditor.default;\r\n    this.state.value = this.props.input.value ? RichTextEditor.createValueFromString(this.props.input.value, 'html') : RichTextEditor.createEmptyValue();    \r\n    this.setState({shouldRender: true})\r\n  }\r\n\r\n  onChange = (value) => {\r\n    this.setState({ value });\r\n    if (this.props.input.onChange) {\r\n      // Send the changes up to the parent component as an HTML string.\r\n      // This is here to demonstrate using `.toString()` but in a real app it\r\n      // would be better to avoid generating a string on each change.\r\n      this.props.input.onChange(\r\n        value.toString('html')\r\n      );\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const toolbarConfig = {\r\n      // Optionally specify the groups to display (displayed in the order listed).\r\n      display: ['INLINE_STYLE_BUTTONS', 'BLOCK_TYPE_BUTTONS', 'LINK_BUTTONS', 'BLOCK_TYPE_DROPDOWN', 'HISTORY_BUTTONS'],\r\n      INLINE_STYLE_BUTTONS: [\r\n        { label: 'Bold', style: 'BOLD', className: 'custom-css-class' },\r\n        { label: 'Italic', style: 'ITALIC' },\r\n        { label: 'Underline', style: 'UNDERLINE' }\r\n      ],\r\n      BLOCK_TYPE_DROPDOWN: [\r\n        { label: 'Normal', style: 'unstyled' },\r\n        { label: 'Heading Large', style: 'header-one' },\r\n        { label: 'Heading Medium', style: 'header-two' },\r\n        { label: 'Heading Small', style: 'header-three' }\r\n      ],\r\n      BLOCK_TYPE_BUTTONS: [\r\n        { label: 'UL', style: 'unordered-list-item' },\r\n        { label: 'OL', style: 'ordered-list-item' }\r\n      ]\r\n    };\r\n    if (this.state.shouldRender) {\r\n      return (\r\n        <RichTextEditorDefault\r\n          value={this.state.value}\r\n          onChange={this.onChange}\r\n          toolbarConfig={toolbarConfig}\r\n          />\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}","import React from 'react';\r\nimport { Field } from 'redux-form';\r\n\r\nconst renderField = ({ className, input, label, type, meta: { touched, error } }) => (\r\n  <div>\r\n    <div>\r\n      <input {...input} type={type} placeholder={label} />\r\n      {touched && error && <span>{error}</span>}\r\n    </div>\r\n  </div>\r\n)\r\n\r\n\r\nconst renderIngredients = ({ fields }) => (\r\n  <div >\r\n    <div>\r\n      <label>Ingredients</label>\r\n      <a type='button' onClick={() => fields.push()}><i className=\"material-icons\">add</i>Add</a>\r\n    </div>\r\n    <ul>\r\n      {fields.map((field, index) =>\r\n        <li key={index}>\r\n          <Field\r\n            name={`${field}.amount`}\r\n            type=\"text\"\r\n            component={renderField}\r\n           \r\n            label=\"amount\" />\r\n          of\r\n          <Field\r\n            name={`${field}.name`}\r\n            type=\"text\"\r\n            component={renderField}\r\n           \r\n            label=\"ingredient\" />\r\n          <a type=\"button\" onClick={() => fields.remove(index)}><i className=\"material-icons\">clear</i></a>\r\n        </li>\r\n      )}\r\n    </ul>\r\n  </div>\r\n);\r\n\r\n\r\nexport default renderIngredients;","import React from 'react';\r\nimport { Link } from 'react-router';\r\n\r\nclass RecipeCreatedPage extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>recipe added successfully</h1>\r\n        <p>thank you for your contribution</p>\r\n        <p>you can manage your recipes on your profile page</p>\r\n        <Link to=\"/create\"><i className=\"material-icons\">add</i> add another one</Link>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RecipeCreatedPage;\r\n","import React from 'react';\r\nimport { Link } from 'react-router';\r\n\r\nclass RecipeDeletedPage extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>recipe deleted</h1>\r\n        <p>it has been utterly destroyed</p>\r\n        <Link to=\"/create\"><i className=\"material-icons\">add</i> add another one</Link>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RecipeDeletedPage;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport callApi from '../../../../util/api';\r\n\r\nimport RecipeCreateForm from '../../components/RecipeCreateForm/RecipeCreateForm';\r\n\r\n// Import Actions\r\nimport { fetchCategories } from '../../../Category/CategoryThunks';\r\nimport { fetchRecipe, updateRecipeRequest } from '../../RecipeActions';\r\n\r\n// Import Selectors\r\nimport { getCategories } from '../../../Category/CategoryReducer';\r\nimport { getRecipe } from '../../RecipeReducer';\r\n\r\nexport class RecipeEditPage extends React.Component {\r\n  componentDidMount() {\r\n    this.props.dispatch(fetchCategories());\r\n  }\r\n\r\n  handleCreate = (fields) => {\r\n    this.props.dispatch(updateRecipeRequest(this.props.recipe.cuid, fields));\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>Edit recipe</h1>\r\n        <RecipeCreateForm editMode=\"true\" initialValues={this.props.recipe} handleCreate={this.handleCreate} categories={this.props.categories} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// Actions required to provide data for this component to render in sever side.\r\nRecipeEditPage.need = [\r\n  () => fetchCategories(),\r\n  ({ params, state }) => fetchRecipe(params.cuid, state.auth.token)\r\n];\r\n\r\n// Retrieve data from store as props\r\nfunction mapStateToProps(state, props) {\r\n  return {\r\n    categories: getCategories(state),\r\n    recipe: getRecipe(state, props.params.cuid),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(RecipeEditPage);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport LoginForm from '../../components/loginform/loginform';\r\nimport { FacebookButton, GoogleButton, TwitterButton } from '../../components/SocialSignInButtons/SocialSignInButtons';\r\n\r\nimport { getMessage } from '../../AuthReducer';\r\nimport env from '../../../../env';\r\n\r\nclass LoginPage extends React.Component {\r\n\r\n  handleLogin = ({email, password}) => {\r\n    this.props.dispatch(loginUserRequest({ email, password }));\r\n  };\r\n\r\n  handleFacebookLogin = () => {\r\n    this.props.dispatch(facebookLoginRequest()).then( () => location.reload());\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div >\r\n          <header>\r\n              <h1>login</h1>\r\n            </header>\r\n          <section >\r\n            <a href={`https://www.facebook.com/v2.10/dialog/oauth?client_id=${env.FACEBOOK_APP_ID}&redirect_uri=${env.FACEBOOK_REDIRECT_URL}`}><button>Facebook</button></a>\r\n          </section>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n// Retrieve data from store as props\r\nfunction mapStateToProps(state, props) {\r\n  return {\r\n    message: getMessage(state)\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(LoginPage);\r\n","import React from 'react';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { renderInput, SubmitButton } from '../../../../components/form/formInputs';\r\nimport { Link } from 'react-router';\r\n\r\n\r\nconst validate = values => {\r\n  const errors = {};\r\n  if (!values.email) {\r\n    errors.email = 'Required!';\r\n  }\r\n  if (!values.password) {\r\n    errors.password = 'Required!';\r\n  }\r\n  return errors;\r\n}\r\n\r\nconst formStyle = { width: '300px;' };\r\n\r\nlet LoginForm = ({ handleSubmit, login, message, invalid, submitting, pristine }) => (\r\n  <div>\r\n    <form onSubmit={handleSubmit(login)}>\r\n      <div>{message}</div>\r\n      <Field name=\"email\" icon=\"fa-envelope\" component={renderInput} type=\"text\" label=\"Email\" />\r\n      <Field name=\"password\" icon=\"fa-unlock-alt\" component={renderInput} type=\"password\" label=\"Password\" />\r\n      <SubmitButton text=\"let me in\" disabled={{ invalid, submitting, pristine }} />\r\n      <div>\r\n      <Link to=\"/signup\">sign up</Link><a>forgot password?</a>\r\n      </div>\r\n    </form>\r\n  </div>\r\n)\r\n\r\nexport default reduxForm({ form: 'loginForm', validate })(LoginForm);","import React from 'react';\r\n\r\nexport const FacebookButton = ({auth}) => (\r\n  <a onClick={auth} >\r\n  <i className=\"fa fa-facebook\"></i>\r\n  <span>facebook</span>  \r\n  </a>\r\n);\r\n\r\nexport const GoogleButton = ({auth}) => (\r\n  <a onClick={()=>{auth()}} >\r\n  <i className=\"fa fa-google-plus\"></i>\r\n  <span>google+</span>  \r\n  </a>\r\n);\r\n\r\nexport const TwitterButton = ({auth}) => (\r\n  <a onClick={()=>{auth()}} >\r\n  <i className=\"fa fa-twitter\"></i>\r\n  <span>twitter</span>\r\n  </a>\r\n);","import ActionCreator from '../../util/action-creator';\r\n\r\nexport const ActionCreators = {\r\n  tokenRequested: new ActionCreator('TOKEN_REQUESTED'),\r\n  tokenRecieved: new ActionCreator('TOKEN_RECIEVED'),\r\n};\r\n\r\nconst initialState = {\r\n  error: '',\r\n  message: '',\r\n  authenticated: false,\r\n  token: '',\r\n  fetching: false,\r\n  user: {}\r\n};\r\n\r\nconst AuthReducer = (state = initialState, action) => {\r\n  let partialState;\r\n\r\n  switch (action.type) {\r\n    case ActionCreators.tokenRequested.type:\r\n      partialState = { fetching: true };\r\n      break;\r\n    case ActionCreators.tokenRecieved.type:\r\n      partialState = { \r\n        fetching: false,\r\n        token: action.payload.token,\r\n        user: action.payload.user,\r\n      };\r\n      break;\r\n    default:\r\n      return state;\r\n  }\r\n\r\n  return { ...state, ...partialState };\r\n}\r\n\r\nexport const getMessage = state => state.auth.message;\r\n\r\nexport default AuthReducer;\r\n","export default {\n  \"FACEBOOK_APP_ID\": \"1005914192867598\",\n  \"FACEBOOK_REDIRECT_URL\": \"http://localhost:3001/facebook/\"\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { requestToken } from '../../AuthThunks';\r\nimport { browserHistory } from 'react-router'\r\n\r\nconst mapStateToProps = state => ({\r\n  user: state.auth.user,\r\n});\r\n\r\nconst dispatchToProps = {\r\n  requestToken: requestToken,\r\n};\r\n\r\n\r\nclass LoginLandingPage extends React.Component {\r\n\r\n  componentDidMount = () => {\r\n    this.props.requestToken(this.props.location.query.code).then(data => {\r\n      browserHistory.push('/');\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return <div>facebook login</div>;\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, dispatchToProps)(LoginLandingPage);\r\n","import api from '../../util/api';\r\nimport { push } from 'react-router-redux'\r\nimport { ActionCreators as AuthActionCreators } from './AuthReducer';\r\n\r\nexport function requestToken(code) {\r\n  return dispatch => {\r\n    dispatch(AuthActionCreators.tokenRequested.create());\r\n    return api.get(`auth/facebook?code=${code}`)\r\n      .then(({ token, user }) => {\r\n        dispatch(AuthActionCreators.tokenRecieved.create({ token, user }));\r\n        localStorage.setItem('auth', JSON.stringify({ token, user }));\r\n        return token;\r\n      });\r\n  }\r\n}\r\n\r\nexport function logOutUser() {\r\n  return dispatch => {\r\n    cookie.remove('token');\r\n    dispatch(logout());\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nexport function SignupPage(props) {\r\n  return (\r\n    <div>\r\n      <form action=\"/auth/signup\" method=\"post\">\r\n        <h3>Signup</h3>\r\n        <input type='text' name=\"email\" placeholder='email'/>\r\n        <input type='password' name=\"password\" placeholder='password'/>\r\n        <button type=\"submit\">Signup!</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Retrieve data from store as props\r\nfunction mapStateToProps(state, props) {\r\n  return {};\r\n}\r\n\r\nexport default connect(mapStateToProps)(SignupPage);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport callApi from '../../../util/api';\r\nimport { browserHistory } from 'react-router';\r\n\r\nimport UserRecipes from '../components/UserRecipes';\r\n\r\n// Import Actions\r\nimport { fetchUser, addUser, removeUser } from '../UserActions';\r\nimport { logOutUser } from '../../Auth/AuthThunks';\r\nimport { fetchRecipe } from '../../Recipe/RecipeActions';\r\n\r\n// Import Selectors\r\nimport { getUser } from '../UserReducer';\r\n\r\nexport class UserPage extends React.Component {\r\n  componentDidMount() {\r\n    this.props.dispatch(fetchUser(this.props.params.id));\r\n  }\r\n\r\n  goToRecipe = (cuid, slug) => {\r\n    this.props.dispatch(fetchRecipe(cuid)).then(() => {\r\n      browserHistory.push(`/recipes/${slug}-${cuid}`);\r\n    });\r\n  }\r\n\r\n  signOut = () => {\r\n    this.props.dispatch(logOutUser());\r\n    this.props.dispatch(removeUser());\r\n    browserHistory.push(`/`);\r\n    location.reload();\r\n  }\r\n\r\n  goToAbout = () => {\r\n    browserHistory.push(`/about`);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>{this.props.user.username}</h1>\r\n        <button onClick={this.signOut}>sign out</button>\r\n        <button onClick={this.goToAbout}>about salash</button>\r\n        <h2>recipes</h2>\r\n        <UserRecipes goToRecipe={this.goToRecipe} user={this.props.user} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// Actions required to provide data for this component to render in sever side.\r\nUserPage.need = [({ params }) => { return fetchUser(params.id); }];\r\n\r\n// Retrieve data from store as props\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: getUser(state),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(UserPage);\r\n","import React from 'react';\r\nimport { Link } from 'react-router';\r\n\r\nexport default ({ user, goToRecipe }) => (\r\n  <div>\r\n    {\r\n      user.recipes && !user.recipes.length\r\n        ? <span>{user.username}has no recipes :(</span> : null\r\n    }\r\n    {user.recipes && user.recipes.map((recipe, index) => (\r\n      <div key={index}>\r\n        <span onClick={() => goToRecipe(recipe.cuid, recipe.slug)}>♥{recipe.loves.low} {recipe.title}</span>\r\n      </div>\r\n    ))}\r\n  </div>\r\n);","import callApi from '../../util/api';\r\n\r\nexport function fetchUser(id) {\r\n  return (dispatch) => {\r\n    return callApi(`users/${id}`).then(res => dispatch(addUser(res.user)));\r\n  };\r\n}\r\n","import ActionCreator from '../../util/action-creator';\r\n\r\nexport const ActionCreators = {\r\n  userRecieved: new ActionCreator('USER_RECIEVED'),\r\n};\r\n\r\nconst initialState = {};\r\n\r\nconst UserReducer = (state = initialState, action) => {\r\n  let partialState;\r\n\r\n  switch (action.type) {\r\n    case ActionCreators.userRecieved.type:\r\n      partialState = action.payload;\r\n      break;\r\n    default:\r\n      return state;\r\n  }\r\n\r\n  return { ...state, ...partialState };\r\n};\r\n\r\nexport const getUser = state => state.user;\r\n\r\nexport default UserReducer;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nexport function NotFoundPage(props) {\r\n  return (\r\n    <div>\r\n      <form action=\"/auth/authenticate\" method=\"post\">\r\n        <h1>404 - Page Not Found</h1>\r\n        <p>Bruh, what u doin out here?</p>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Retrieve data from store as props\r\nfunction mapStateToProps(state, props) {\r\n  return {};\r\n}\r\n\r\nexport default connect(mapStateToProps)(NotFoundPage);\r\n","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { combineReducers } from 'redux';\r\n\r\n// Import Reducers\r\nimport app from './modules/App/app-reducer';\r\nimport recipes from './modules/Recipe/RecipeReducer';\r\nimport categories from './modules/Category/CategoryReducer';\r\nimport auth from './modules/Auth/AuthReducer';\r\nimport user from './modules/User/UserReducer';\r\nimport { routerReducer as routing } from 'react-router-redux';\r\nimport { reducer as form } from 'redux-form'\r\n\r\nconst rootReducer = combineReducers({\r\n  routing,\r\n  form,\r\n  app,\r\n  recipes,\r\n  categories,\r\n  auth,\r\n  user\r\n});\r\n\r\nexport const buildInitialState = () => localStorage.getItem(\"auth\") ? {\r\n  auth: JSON.parse(localStorage.getItem(\"auth\")),\r\n} : {};\r\n\r\nexport function configureStore(initialState = {}) {\r\n\r\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\n  // Middleware and store enhancers\r\n  const enhancers = [\r\n    applyMiddleware(thunk),\r\n  ];\r\n\r\n  const store = createStore(rootReducer, initialState, composeEnhancers(...enhancers));\r\n  return store;\r\n}\r\n"]}